!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).halfred=e()}}(function(){return function o(u,s,l){function a(r,e){if(!s[r]){if(!u[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(p)return p(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[r]={exports:{}};u[r][0].call(i.exports,function(e){return a(u[r][1][e]||e)},i,i.exports,o,u,s,l)}return s[r].exports}for(var p="function"==typeof require&&require,e=0;e<l.length;e++)a(l[e]);return a}({1:[function(e,r,t){var n=e("./lib/parser"),i=e("./lib/resource"),o=!1,u="undefined"!=typeof console&&"function"==typeof console.warn?console:{log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}};r.exports={parse:function(e){return new n(u).parse(e,o)},injectLogger:function(e){u=e},enableValidation:function(e){o=null==e||e},disableValidation:function(){o=!1},Resource:i}},{"./lib/parser":3,"./lib/resource":4}],2:[function(e,r,t){"use strict";function n(){1<=arguments.length?this._array=arguments[0]:this._array=[]}n.prototype.array=function(){return this._array},n.prototype.isEmpty=function(e){return 0===this._array.length},n.prototype.push=function(e){var r=this._array.slice(0);return r.push(e),new n(r)},n.prototype.pop=function(){return new n(this._array.slice(0,this._array.length-1))},n.prototype.peek=function(){if(this.isEmpty())throw new Error("can't peek on empty stack");return this._array[this._array.length-1]},r.exports=n},{}],3:[function(e,r,t){"use strict";var s,p=e("./resource"),n=e("./immutable_stack"),l={href:{required:!0,defaultValue:null},templated:{required:!1,defaultValue:!1},type:{required:!1,defaultValue:null},deprecation:{required:!1,defaultValue:null},name:{required:!1,defaultValue:null},profile:{required:!1,defaultValue:null},title:{required:!1,defaultValue:null},hreflang:{required:!1,defaultValue:null}};function i(e){s=e}function f(e,r,t){if(null==e)return e;var n,i,o,u=function(e,r,t){null!=(e=c(e,d,r,t))&&null!=e.self||y("Resource does not have a self link",r,t);return e}(e._links,r,t.push("_links")),s=(n=u)?n.curies:[],l=function(e,n,i){var r=c(e,h,n,i);if(null==r)return r;return Object.keys(r).forEach(function(t){r[t]=r[t].map(function(e){var r=f(e,null!=n?[]:null,i.push(t));return r._original=e,r})}),r}(e._embedded,r,t.push("_embedded")),a=new p(u,s,l,r);return i=e,o=a,Object.keys(i).forEach(function(e){"_links"!==e&&"_embedded"!==e&&(o[e]=i[e])}),a._original=e,a}function c(s,l,a,p){if(null==s)return s;var f={};return Object.keys(s).forEach(function(e){var r,t,n,i,o,u;f[e]=(t=s[r=e],n=l,i=a,o=p,u=t,"[object Array]"===Object.prototype.toString.call(u)?t.map(function(e){return n(r,e,i,o)}):[n(r,t,i,o)])}),f}function d(r,e,t,n){if("object"!=typeof e)throw new Error("Link object is not an actual object: "+e+" ["+typeof e+"]");var i,o,u=(i=e,o={},Object.keys(i).forEach(function(e){o[e]=i[e]}),o);return Object.keys(l).forEach(function(e){null==u[e]&&(l[e].required&&y("Link misses required property "+e+".",t,n.push(r)),null!=l[e].defaultValue&&(u[e]=l[e].defaultValue))}),u.deprecation&&s.warn("Link "+a(n.push(r))+" is deprecated, see "+u.deprecation),!0!==u.templated&&!1!==u.templated&&(u.templated=!1),t&&u.href&&0<=u.href.indexOf("{")&&!u.templated&&y('Link seems to be an URI template but its "templated" property is not set to true.',t,n.push(r)),u}function h(e,r){return r}function y(e,r,t){r&&r.push({path:a(t),message:e})}function a(e){for(var r="$.",t=0;t<e.array().length;t++)r+=e.array()[t]+".";return r=r.substring(0,r.length-1)}i.prototype.parse=function(e,r){return f(e,r?[]:null,new n)},r.exports=i},{"./immutable_stack":2,"./resource":4}],4:[function(e,r,t){"use strict";function n(e,r,t,n){this._links=e||{},this._initCuries(r),this._embedded=t||{},this._validation=n||[]}function i(e,r){return null!=e?e[r]:null}function o(e,r,t){t=t||0;var n=i(e,r);return null!=n&&1<=n.length?n[t]:null}n.prototype._initCuries=function(e){if(this._curiesMap={},e){this._curies=e;for(var r=0;r<this._curies.length;r++){var t=this._curies[r];this._curiesMap[t.name]=t}}else this._curies=[];this._preResolveCuries()},n.prototype._preResolveCuries=function(){this._resolvedCuriesMap={};for(var e=0;e<this._curies.length;e++){var r=this._curies[e];if(r.name)for(var t in this._links)"curies"!==t&&this._preResolveCurie(r,t)}},n.prototype._preResolveCurie=function(e,r){this._links[r];var t=r.split(/:(.+)/),n=t[0];if(e.name===n)if(e.templated&&1<=t.length){var i=e.href.replace(/(.*){(.*)}(.*)/,"$1"+t[1]+"$3");this._resolvedCuriesMap[i]=r}else this._resolvedCuriesMap[e.href]=r},n.prototype.allLinkArrays=function(){return this._links},n.prototype.linkArray=function(e){return i(this._links,e)},n.prototype.link=function(e,r){return o(this._links,e,r)},n.prototype.hasCuries=function(e){return 0<this._curies.length},n.prototype.curieArray=function(e){return this._curies},n.prototype.curie=function(e){return this._curiesMap[e]},n.prototype.reverseResolveCurie=function(e){return this._resolvedCuriesMap[e]},n.prototype.allEmbeddedResourceArrays=function(){return this._embedded},n.prototype.embeddedResourceArray=function(e){return i(this._embedded,e)},n.prototype.embeddedResource=function(e,r){return o(this._embedded,e,r)},n.prototype.original=function(){return this._original},n.prototype.validationIssues=function(){return this._validation},n.prototype.allLinks=n.prototype.allLinkArrays,n.prototype.allEmbeddedArrays=n.prototype.allEmbeddedResources=n.prototype.allEmbeddedResourceArrays,n.prototype.embeddedArray=n.prototype.embeddedResourceArray,n.prototype.embedded=n.prototype.embeddedResource,n.prototype.validation=n.prototype.validationIssues,r.exports=n},{}]},{},[1])(1)});